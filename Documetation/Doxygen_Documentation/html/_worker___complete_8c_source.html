<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>Worker_Complete/Worker_Complete.c Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.6.3 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul>
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div class="tabs">
    <ul>
      <li><a href="files.html"><span>File&nbsp;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
<h1>Worker_Complete/Worker_Complete.c</h1><a href="_worker___complete_8c.html">Go to the documentation of this file.</a><div class="fragment"><pre class="fragment"><a name="l00001"></a>00001 <span class="comment">/********************************************************************************</span>
<a name="l00002"></a>00002 <span class="comment"> Written by: Mehadi Seid, Swanand Kulkarni, Rajesh Kaushik</span>
<a name="l00003"></a>00003 <span class="comment"> AVR Studio Version 4.17, Build 666</span>
<a name="l00004"></a>00004 <span class="comment"></span>
<a name="l00005"></a>00005 <span class="comment"> Starting Date: 20 September 2010</span>
<a name="l00006"></a>00006 <span class="comment"> End Date: 8 November 2010</span>
<a name="l00007"></a>00007 <span class="comment">*********************************************************************************/</span>
<a name="l00008"></a>00008 
<a name="l00009"></a>00009 <span class="comment">/********************************************************************************</span>
<a name="l00010"></a>00010 <span class="comment"></span>
<a name="l00011"></a>00011 <span class="comment">   Copyright (c) 2010, ERTS Lab.                       -*- c -*-</span>
<a name="l00012"></a>00012 <span class="comment">   All rights reserved.</span>
<a name="l00013"></a>00013 <span class="comment"></span>
<a name="l00014"></a>00014 <span class="comment">   Redistribution and use in source and binary forms, with or without</span>
<a name="l00015"></a>00015 <span class="comment">   modification, are permitted provided that the following conditions are met:</span>
<a name="l00016"></a>00016 <span class="comment"></span>
<a name="l00017"></a>00017 <span class="comment">   * Redistributions of source code must retain the above copyright</span>
<a name="l00018"></a>00018 <span class="comment">     notice, this list of conditions and the following disclaimer.</span>
<a name="l00019"></a>00019 <span class="comment"></span>
<a name="l00020"></a>00020 <span class="comment">   * Redistributions in binary form must reproduce the above copyright</span>
<a name="l00021"></a>00021 <span class="comment">     notice, this list of conditions and the following disclaimer in</span>
<a name="l00022"></a>00022 <span class="comment">     the documentation and/or other materials provided with the</span>
<a name="l00023"></a>00023 <span class="comment">     distribution.</span>
<a name="l00024"></a>00024 <span class="comment"></span>
<a name="l00025"></a>00025 <span class="comment">   * Neither the name of the copyright holders nor the names of</span>
<a name="l00026"></a>00026 <span class="comment">     contributors may be used to endorse or promote products derived</span>
<a name="l00027"></a>00027 <span class="comment">     from this software without specific prior written permission.</span>
<a name="l00028"></a>00028 <span class="comment"></span>
<a name="l00029"></a>00029 <span class="comment">   * Source code can be used for academic purpose. </span>
<a name="l00030"></a>00030 <span class="comment">  For commercial use permission form the author needs to be taken.</span>
<a name="l00031"></a>00031 <span class="comment"></span>
<a name="l00032"></a>00032 <span class="comment">  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS &quot;AS IS&quot;</span>
<a name="l00033"></a>00033 <span class="comment">  AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE</span>
<a name="l00034"></a>00034 <span class="comment">  IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE</span>
<a name="l00035"></a>00035 <span class="comment">  ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR CONTRIBUTORS BE</span>
<a name="l00036"></a>00036 <span class="comment">  LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR</span>
<a name="l00037"></a>00037 <span class="comment">  CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF</span>
<a name="l00038"></a>00038 <span class="comment">  SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS</span>
<a name="l00039"></a>00039 <span class="comment">  INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN</span>
<a name="l00040"></a>00040 <span class="comment">  CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE)</span>
<a name="l00041"></a>00041 <span class="comment">  ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE</span>
<a name="l00042"></a>00042 <span class="comment">  POSSIBILITY OF SUCH DAMAGE. </span>
<a name="l00043"></a>00043 <span class="comment"></span>
<a name="l00044"></a>00044 <span class="comment">  Software released under Creative Commence cc by-nc-sa licence.</span>
<a name="l00045"></a>00045 <span class="comment">  For legal information refer to: </span>
<a name="l00046"></a>00046 <span class="comment">  http://creativecommons.org/licenses/by-nc-sa/3.0/legalcode</span>
<a name="l00047"></a>00047 <span class="comment"></span>
<a name="l00048"></a>00048 <span class="comment">********************************************************************************/</span>
<a name="l00049"></a>00049 
<a name="l00050"></a>00050 
<a name="l00051"></a>00051 <span class="comment">/*</span>
<a name="l00052"></a>00052 <span class="comment">* Code For Worker Robot</span>
<a name="l00053"></a>00053 <span class="comment">*</span>
<a name="l00054"></a>00054 <span class="comment">*/</span>
<a name="l00055"></a>00055 
<a name="l00056"></a>00056 <span class="preprocessor">#include &quot;firebird_winavr.h&quot;</span>
<a name="l00057"></a>00057 
<a name="l00058"></a><a class="code" href="_worker___complete_8c.html#a1d7b72031fa39d396d531503904f337b">00058</a> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="_line_follower_counter_8c.html#a1d7b72031fa39d396d531503904f337b">position</a> = 0; <span class="comment">// Record the current postion of Robot using block count.</span>
<a name="l00059"></a><a class="code" href="_worker___complete_8c.html#af6f91371e1e080e892b7cb557a09967f">00059</a> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="_worker___complete_8c.html#af6f91371e1e080e892b7cb557a09967f">locations</a>[10];
<a name="l00060"></a><a class="code" href="_worker___complete_8c.html#a0094a4792faa200e95699857daa39e44">00060</a> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="_worker___complete_8c.html#a0094a4792faa200e95699857daa39e44">location_cnt</a> = 0;
<a name="l00061"></a><a class="code" href="_worker___complete_8c.html#a7e9985ffcfd3a067c906d1e4f70f34eb">00061</a> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="_worker___complete_8c.html#a7e9985ffcfd3a067c906d1e4f70f34eb">locations_scanned</a> = 0;
<a name="l00062"></a><a class="code" href="_worker___complete_8c.html#a433b1c9921d3b90f7c145c781a43f325">00062</a> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="_worker___complete_8c.html#a433b1c9921d3b90f7c145c781a43f325">data</a> = 0;
<a name="l00063"></a><a class="code" href="_worker___complete_8c.html#a37d145f01d952970d059941663ccfff0">00063</a> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="_line_follower_counter_8c.html#a37d145f01d952970d059941663ccfff0">stopDistance</a> = 200;
<a name="l00064"></a><a class="code" href="_worker___complete_8c.html#a492e7b58ed599c481757fecb578af24e">00064</a> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="_line_follower_counter_8c.html#a492e7b58ed599c481757fecb578af24e">maxWhite</a> = 40;
<a name="l00065"></a><a class="code" href="_worker___complete_8c.html#ad9aab8b396b3cc6d5ec886ed89c08848">00065</a> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="_line_follower_counter_8c.html#ad9aab8b396b3cc6d5ec886ed89c08848">fastSpeed</a> = 120;
<a name="l00066"></a><a class="code" href="_worker___complete_8c.html#a496e53769bd08930fd22618690e20621">00066</a> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="_line_follower_counter_8c.html#a496e53769bd08930fd22618690e20621">mediumSpeed</a> = 100;
<a name="l00067"></a><a class="code" href="_worker___complete_8c.html#a902c10aeadbed6441e1361ea8949cb7f">00067</a> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="_line_follower_counter_8c.html#a902c10aeadbed6441e1361ea8949cb7f">slowSpeed</a> = 80;
<a name="l00068"></a><a class="code" href="_worker___complete_8c.html#a6a88a42d06770ea17c78a8368b29e4ce">00068</a> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="_line_follower_counter_8c.html#a6a88a42d06770ea17c78a8368b29e4ce">RIGHT_WHITELINE_VALUE</a>;
<a name="l00069"></a><a class="code" href="_worker___complete_8c.html#a0ae7d1d7c31810a587fe0091c8aa12d8">00069</a> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="_line_follower_counter_8c.html#a0ae7d1d7c31810a587fe0091c8aa12d8">MIDDLE_WHITELINE_VALUE</a>;
<a name="l00070"></a><a class="code" href="_worker___complete_8c.html#a6c90d82e3056adb1bbd594030944d3d5">00070</a> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="_line_follower_counter_8c.html#a6c90d82e3056adb1bbd594030944d3d5">LEFT_WHITELINE_VALUE</a>;
<a name="l00071"></a><a class="code" href="_worker___complete_8c.html#afa5f52316976b037653d0964815ca85f">00071</a> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="_line_follower_counter_8c.html#afa5f52316976b037653d0964815ca85f">FRONT_IR_VALUE</a>;
<a name="l00072"></a>00072 
<a name="l00073"></a><a class="code" href="_worker___complete_8c.html#af48e0311746bc01574a90f142220e748">00073</a> <span class="keywordtype">unsigned</span> <span class="keywordtype">char</span> <a class="code" href="_line_follower_counter_8c.html#af48e0311746bc01574a90f142220e748">command</a>;
<a name="l00074"></a><a class="code" href="_worker___complete_8c.html#a227e31138c9cd9e9c85f9f3353cb503d">00074</a> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="_line_follower_counter_8c.html#a227e31138c9cd9e9c85f9f3353cb503d">startBlack</a> = 0;
<a name="l00075"></a>00075 
<a name="l00076"></a>00076 
<a name="l00077"></a>00077 
<a name="l00078"></a><a class="code" href="_worker___complete_8c.html#a34c0c3ce843ecb8ee20be9eee84cac2d">00078</a> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="_line_follower_counter_8c.html#a34c0c3ce843ecb8ee20be9eee84cac2d">prevLeftSpeed</a> = 0;
<a name="l00079"></a><a class="code" href="_worker___complete_8c.html#ab85651c35258527ad41ce8f20ea34135">00079</a> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="_line_follower_counter_8c.html#ab85651c35258527ad41ce8f20ea34135">prevRightSpeed</a> = 0;
<a name="l00080"></a><a class="code" href="_worker___complete_8c.html#a2214cded400f5f10aff4dced11b10b78">00080</a> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="_line_follower_counter_8c.html#a2214cded400f5f10aff4dced11b10b78">prevState</a> = -1;  <span class="comment">//1 - white, 0 - black</span>
<a name="l00081"></a>00081 
<a name="l00082"></a><a class="code" href="_worker___complete_8c.html#a0971b43360abc733cbc1b30a1282c663">00082</a> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="_line_follower_counter_8c.html#a0971b43360abc733cbc1b30a1282c663">sendOnce</a> = 0;  <span class="comment">//1 - send when stoping, 0 - already sent</span>
<a name="l00083"></a><a class="code" href="_worker___complete_8c.html#aeb8edcee421435b370914865162400ea">00083</a> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="_worker___complete_8c.html#aeb8edcee421435b370914865162400ea">rotate</a> = 1;
<a name="l00084"></a>00084 
<a name="l00085"></a>00085 <span class="comment">//</span>
<a name="l00086"></a><a class="code" href="_worker___complete_8c.html#a8cab34bde264a770ce4df4c6676fc0bc">00086</a> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="_worker___complete_8c.html#a8cab34bde264a770ce4df4c6676fc0bc">recievedHeight</a> = 0;
<a name="l00087"></a><a class="code" href="_worker___complete_8c.html#afce64baa3e3238dc386a187fd9f753ac">00087</a> <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> <a class="code" href="_worker___complete_8c.html#afce64baa3e3238dc386a187fd9f753ac">armHeight</a> = 0;
<a name="l00088"></a>00088 
<a name="l00089"></a><a class="code" href="_worker___complete_8c.html#a62d19f1b68cc51e55723b31a29cdef78">00089</a> <span class="keywordtype">int</span> <a class="code" href="_worker___complete_8c.html#a62d19f1b68cc51e55723b31a29cdef78">dist</a>;
<a name="l00090"></a>00090 
<a name="l00091"></a>00091 
<a name="l00093"></a><a class="code" href="_worker___complete_8c.html#ab5f8e79f6ffa3be348924e573e8dcfd1">00093</a> <a class="code" href="_line_follower_counter_8c.html#ab5f8e79f6ffa3be348924e573e8dcfd1" title="ISR for receive complete interrupt.">SIGNAL</a>(SIG_USART0_RECV) 
<a name="l00094"></a>00094 {
<a name="l00095"></a>00095  <a class="code" href="_worker___complete_8c.html#a433b1c9921d3b90f7c145c781a43f325">data</a> = UDR0; <span class="comment">//making copy of data from UDR0 in &#39;data&#39; variable</span>
<a name="l00096"></a>00096  <span class="comment">//LCD_DISPLAY_INT_1(4);</span>
<a name="l00097"></a>00097  <span class="keywordflow">if</span>(<a class="code" href="_worker___complete_8c.html#a433b1c9921d3b90f7c145c781a43f325">data</a> == (<span class="keywordtype">int</span>)<span class="charliteral">&#39;f&#39;</span>)
<a name="l00098"></a>00098  {
<a name="l00099"></a>00099   <a class="code" href="_scout___robot_2buzzer_8h.html#a7822c093795c72a5eaf02b9efa914915">BUZZER_ON</a>();
<a name="l00100"></a>00100   <a class="code" href="_line_follower_counter_8c.html#a2214cded400f5f10aff4dced11b10b78">prevState</a> = 1;
<a name="l00101"></a>00101   <a class="code" href="_line_follower_counter_8c.html#a0971b43360abc733cbc1b30a1282c663">sendOnce</a> = 1;
<a name="l00102"></a>00102   <span class="comment">//UCSR0B = UCSR0B | 0xbf;</span>
<a name="l00103"></a>00103  }
<a name="l00104"></a>00104  <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<a class="code" href="_worker___complete_8c.html#a433b1c9921d3b90f7c145c781a43f325">data</a> == (<span class="keywordtype">int</span>)<span class="charliteral">&#39;l&#39;</span>)
<a name="l00105"></a>00105  {
<a name="l00106"></a>00106   <a class="code" href="_line_follower_counter_8c.html#af48e0311746bc01574a90f142220e748">command</a> = <span class="charliteral">&#39;l&#39;</span>; <span class="comment">//tells the worker robot that the next data to be sent a location data</span>
<a name="l00107"></a>00107  }
<a name="l00108"></a>00108  <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<a class="code" href="_worker___complete_8c.html#a433b1c9921d3b90f7c145c781a43f325">data</a> == (<span class="keywordtype">int</span>)<span class="charliteral">&#39;h&#39;</span>)
<a name="l00109"></a>00109  {
<a name="l00110"></a>00110   <a class="code" href="_line_follower_counter_8c.html#af48e0311746bc01574a90f142220e748">command</a> = <span class="charliteral">&#39;h&#39;</span>; <span class="comment">//tells the worker robot that the next data to be sent a height data</span>
<a name="l00111"></a>00111  }
<a name="l00112"></a>00112  <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<a class="code" href="_worker___complete_8c.html#a433b1c9921d3b90f7c145c781a43f325">data</a> == (<span class="keywordtype">int</span>)<span class="charliteral">&#39;d&#39;</span>)
<a name="l00113"></a>00113  {
<a name="l00114"></a>00114   <a class="code" href="_line_follower_counter_8c.html#af48e0311746bc01574a90f142220e748">command</a> = <span class="charliteral">&#39;d&#39;</span>;
<a name="l00115"></a>00115  }
<a name="l00116"></a>00116 
<a name="l00117"></a>00117 
<a name="l00118"></a>00118  <span class="keywordflow">switch</span>(<a class="code" href="_worker___complete_8c.html#a433b1c9921d3b90f7c145c781a43f325">data</a>)
<a name="l00119"></a>00119  {
<a name="l00120"></a>00120   <span class="keywordflow">case</span> 0x31:
<a name="l00121"></a>00121   {
<a name="l00122"></a>00122    <a class="code" href="_scout___robot_2buzzer_8h.html#a7822c093795c72a5eaf02b9efa914915">BUZZER_ON</a>();
<a name="l00123"></a>00123    <span class="keywordflow">if</span>(<a class="code" href="_line_follower_counter_8c.html#af48e0311746bc01574a90f142220e748">command</a> == <span class="charliteral">&#39;l&#39;</span>)
<a name="l00124"></a>00124    {
<a name="l00125"></a>00125     <a class="code" href="_worker___complete_8c.html#af6f91371e1e080e892b7cb557a09967f">locations</a>[<a class="code" href="_worker___complete_8c.html#a0094a4792faa200e95699857daa39e44">location_cnt</a>] = 1;
<a name="l00126"></a>00126     <a class="code" href="_worker___complete_8c.html#a0094a4792faa200e95699857daa39e44">location_cnt</a>++;
<a name="l00127"></a>00127     <span class="keywordflow">break</span>;
<a name="l00128"></a>00128    }
<a name="l00129"></a>00129    <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<a class="code" href="_line_follower_counter_8c.html#af48e0311746bc01574a90f142220e748">command</a> == <span class="charliteral">&#39;h&#39;</span>)
<a name="l00130"></a>00130    {
<a name="l00131"></a>00131     <a class="code" href="_worker___complete_8c.html#afce64baa3e3238dc386a187fd9f753ac">armHeight</a> = 10;
<a name="l00132"></a>00132     <a class="code" href="_worker___complete_8c.html#a8cab34bde264a770ce4df4c6676fc0bc">recievedHeight</a> = 1;
<a name="l00133"></a>00133     <span class="keywordflow">break</span>;
<a name="l00134"></a>00134    }
<a name="l00135"></a>00135    <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<a class="code" href="_line_follower_counter_8c.html#af48e0311746bc01574a90f142220e748">command</a> == <span class="charliteral">&#39;d&#39;</span>)
<a name="l00136"></a>00136    {
<a name="l00137"></a>00137     <span class="keywordflow">break</span>;
<a name="l00138"></a>00138    } 
<a name="l00139"></a>00139   }
<a name="l00140"></a>00140   <span class="keywordflow">case</span> 0x32:
<a name="l00141"></a>00141   {
<a name="l00142"></a>00142    <a class="code" href="_scout___robot_2buzzer_8h.html#a7822c093795c72a5eaf02b9efa914915">BUZZER_ON</a>();
<a name="l00143"></a>00143    <span class="keywordflow">if</span>(<a class="code" href="_line_follower_counter_8c.html#af48e0311746bc01574a90f142220e748">command</a> == <span class="charliteral">&#39;l&#39;</span>)
<a name="l00144"></a>00144    {
<a name="l00145"></a>00145     <a class="code" href="_worker___complete_8c.html#af6f91371e1e080e892b7cb557a09967f">locations</a>[<a class="code" href="_worker___complete_8c.html#a0094a4792faa200e95699857daa39e44">location_cnt</a>] = 2;
<a name="l00146"></a>00146     <a class="code" href="_worker___complete_8c.html#a0094a4792faa200e95699857daa39e44">location_cnt</a>++;
<a name="l00147"></a>00147     <span class="keywordflow">break</span>;
<a name="l00148"></a>00148    }
<a name="l00149"></a>00149    <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<a class="code" href="_line_follower_counter_8c.html#af48e0311746bc01574a90f142220e748">command</a> == <span class="charliteral">&#39;h&#39;</span>)
<a name="l00150"></a>00150    {
<a name="l00151"></a>00151     <a class="code" href="_worker___complete_8c.html#afce64baa3e3238dc386a187fd9f753ac">armHeight</a> = 20;
<a name="l00152"></a>00152     <a class="code" href="_worker___complete_8c.html#a8cab34bde264a770ce4df4c6676fc0bc">recievedHeight</a> = 1;
<a name="l00153"></a>00153     <span class="keywordflow">break</span>;
<a name="l00154"></a>00154    }
<a name="l00155"></a>00155    <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<a class="code" href="_line_follower_counter_8c.html#af48e0311746bc01574a90f142220e748">command</a> == <span class="charliteral">&#39;d&#39;</span>)
<a name="l00156"></a>00156    {
<a name="l00157"></a>00157     <span class="keywordflow">break</span>;
<a name="l00158"></a>00158    } 
<a name="l00159"></a>00159   }
<a name="l00160"></a>00160   <span class="keywordflow">case</span> 0x33:
<a name="l00161"></a>00161   {
<a name="l00162"></a>00162    <a class="code" href="_scout___robot_2buzzer_8h.html#a7822c093795c72a5eaf02b9efa914915">BUZZER_ON</a>();
<a name="l00163"></a>00163    <span class="keywordflow">if</span>(<a class="code" href="_line_follower_counter_8c.html#af48e0311746bc01574a90f142220e748">command</a> == <span class="charliteral">&#39;l&#39;</span>)
<a name="l00164"></a>00164    {
<a name="l00165"></a>00165     <a class="code" href="_worker___complete_8c.html#af6f91371e1e080e892b7cb557a09967f">locations</a>[<a class="code" href="_worker___complete_8c.html#a0094a4792faa200e95699857daa39e44">location_cnt</a>] = 3;
<a name="l00166"></a>00166     <a class="code" href="_worker___complete_8c.html#a0094a4792faa200e95699857daa39e44">location_cnt</a>++;
<a name="l00167"></a>00167     <span class="keywordflow">break</span>;
<a name="l00168"></a>00168    }
<a name="l00169"></a>00169    <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<a class="code" href="_line_follower_counter_8c.html#af48e0311746bc01574a90f142220e748">command</a> == <span class="charliteral">&#39;h&#39;</span>)
<a name="l00170"></a>00170    {
<a name="l00171"></a>00171     <a class="code" href="_worker___complete_8c.html#afce64baa3e3238dc386a187fd9f753ac">armHeight</a> = 30;
<a name="l00172"></a>00172     <a class="code" href="_worker___complete_8c.html#a8cab34bde264a770ce4df4c6676fc0bc">recievedHeight</a> = 1;
<a name="l00173"></a>00173     <span class="keywordflow">break</span>;
<a name="l00174"></a>00174    }
<a name="l00175"></a>00175    <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<a class="code" href="_line_follower_counter_8c.html#af48e0311746bc01574a90f142220e748">command</a> == <span class="charliteral">&#39;d&#39;</span>)
<a name="l00176"></a>00176    {
<a name="l00177"></a>00177     <span class="keywordflow">break</span>;
<a name="l00178"></a>00178    } 
<a name="l00179"></a>00179   }
<a name="l00180"></a>00180   <span class="keywordflow">case</span> 0x34:
<a name="l00181"></a>00181   {
<a name="l00182"></a>00182    <a class="code" href="_scout___robot_2buzzer_8h.html#a7822c093795c72a5eaf02b9efa914915">BUZZER_ON</a>();
<a name="l00183"></a>00183    <span class="keywordflow">if</span>(<a class="code" href="_line_follower_counter_8c.html#af48e0311746bc01574a90f142220e748">command</a> == <span class="charliteral">&#39;l&#39;</span>)
<a name="l00184"></a>00184    {
<a name="l00185"></a>00185     <a class="code" href="_worker___complete_8c.html#af6f91371e1e080e892b7cb557a09967f">locations</a>[<a class="code" href="_worker___complete_8c.html#a0094a4792faa200e95699857daa39e44">location_cnt</a>] = 4;
<a name="l00186"></a>00186     <a class="code" href="_worker___complete_8c.html#a0094a4792faa200e95699857daa39e44">location_cnt</a>++;
<a name="l00187"></a>00187     <span class="keywordflow">break</span>;
<a name="l00188"></a>00188    }
<a name="l00189"></a>00189    <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<a class="code" href="_line_follower_counter_8c.html#af48e0311746bc01574a90f142220e748">command</a> == <span class="charliteral">&#39;h&#39;</span>)
<a name="l00190"></a>00190    {
<a name="l00191"></a>00191     <a class="code" href="_worker___complete_8c.html#afce64baa3e3238dc386a187fd9f753ac">armHeight</a> = 40;
<a name="l00192"></a>00192     <a class="code" href="_worker___complete_8c.html#a8cab34bde264a770ce4df4c6676fc0bc">recievedHeight</a> = 1;
<a name="l00193"></a>00193     <span class="keywordflow">break</span>;
<a name="l00194"></a>00194    }
<a name="l00195"></a>00195    <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<a class="code" href="_line_follower_counter_8c.html#af48e0311746bc01574a90f142220e748">command</a> == <span class="charliteral">&#39;d&#39;</span>)
<a name="l00196"></a>00196    {
<a name="l00197"></a>00197     <span class="keywordflow">break</span>;
<a name="l00198"></a>00198    } 
<a name="l00199"></a>00199   }
<a name="l00200"></a>00200   <span class="keywordflow">case</span> 0x35:
<a name="l00201"></a>00201   {
<a name="l00202"></a>00202    <a class="code" href="_scout___robot_2buzzer_8h.html#a7822c093795c72a5eaf02b9efa914915">BUZZER_ON</a>();
<a name="l00203"></a>00203    <span class="keywordflow">if</span>(<a class="code" href="_line_follower_counter_8c.html#af48e0311746bc01574a90f142220e748">command</a> == <span class="charliteral">&#39;l&#39;</span>)
<a name="l00204"></a>00204    {
<a name="l00205"></a>00205     <a class="code" href="_worker___complete_8c.html#af6f91371e1e080e892b7cb557a09967f">locations</a>[<a class="code" href="_worker___complete_8c.html#a0094a4792faa200e95699857daa39e44">location_cnt</a>] = 5;
<a name="l00206"></a>00206     <a class="code" href="_worker___complete_8c.html#a0094a4792faa200e95699857daa39e44">location_cnt</a>++;
<a name="l00207"></a>00207     <span class="keywordflow">break</span>;
<a name="l00208"></a>00208    }
<a name="l00209"></a>00209    <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<a class="code" href="_line_follower_counter_8c.html#af48e0311746bc01574a90f142220e748">command</a> == <span class="charliteral">&#39;h&#39;</span>)
<a name="l00210"></a>00210    {
<a name="l00211"></a>00211     <a class="code" href="_worker___complete_8c.html#afce64baa3e3238dc386a187fd9f753ac">armHeight</a> = 50;
<a name="l00212"></a>00212     <a class="code" href="_worker___complete_8c.html#a8cab34bde264a770ce4df4c6676fc0bc">recievedHeight</a> = 1;
<a name="l00213"></a>00213     <span class="keywordflow">break</span>;
<a name="l00214"></a>00214    }
<a name="l00215"></a>00215    <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<a class="code" href="_line_follower_counter_8c.html#af48e0311746bc01574a90f142220e748">command</a> == <span class="charliteral">&#39;d&#39;</span>)
<a name="l00216"></a>00216    {
<a name="l00217"></a>00217     <span class="keywordflow">break</span>;
<a name="l00218"></a>00218    } 
<a name="l00219"></a>00219   }
<a name="l00220"></a>00220   
<a name="l00221"></a>00221   <span class="keywordflow">case</span> 0x36:
<a name="l00222"></a>00222   {
<a name="l00223"></a>00223    <a class="code" href="_scout___robot_2buzzer_8h.html#a7822c093795c72a5eaf02b9efa914915">BUZZER_ON</a>();
<a name="l00224"></a>00224    <span class="keywordflow">if</span>(<a class="code" href="_line_follower_counter_8c.html#af48e0311746bc01574a90f142220e748">command</a> == <span class="charliteral">&#39;l&#39;</span>)
<a name="l00225"></a>00225    {
<a name="l00226"></a>00226     <a class="code" href="_worker___complete_8c.html#af6f91371e1e080e892b7cb557a09967f">locations</a>[<a class="code" href="_worker___complete_8c.html#a0094a4792faa200e95699857daa39e44">location_cnt</a>] = 6;
<a name="l00227"></a>00227     <a class="code" href="_worker___complete_8c.html#a0094a4792faa200e95699857daa39e44">location_cnt</a>++;
<a name="l00228"></a>00228     <span class="keywordflow">break</span>;
<a name="l00229"></a>00229    }
<a name="l00230"></a>00230    <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<a class="code" href="_line_follower_counter_8c.html#af48e0311746bc01574a90f142220e748">command</a> == <span class="charliteral">&#39;h&#39;</span>)
<a name="l00231"></a>00231    {
<a name="l00232"></a>00232     <a class="code" href="_worker___complete_8c.html#afce64baa3e3238dc386a187fd9f753ac">armHeight</a> = 60;
<a name="l00233"></a>00233     <a class="code" href="_worker___complete_8c.html#a8cab34bde264a770ce4df4c6676fc0bc">recievedHeight</a> = 1;
<a name="l00234"></a>00234     <span class="keywordflow">break</span>;
<a name="l00235"></a>00235    }
<a name="l00236"></a>00236    <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<a class="code" href="_line_follower_counter_8c.html#af48e0311746bc01574a90f142220e748">command</a> == <span class="charliteral">&#39;d&#39;</span>)
<a name="l00237"></a>00237    {
<a name="l00238"></a>00238     <span class="keywordflow">break</span>;
<a name="l00239"></a>00239    } 
<a name="l00240"></a>00240   }
<a name="l00241"></a>00241   <span class="keywordflow">case</span> 0x37:
<a name="l00242"></a>00242   {
<a name="l00243"></a>00243    <span class="keywordflow">if</span>(<a class="code" href="_line_follower_counter_8c.html#af48e0311746bc01574a90f142220e748">command</a> == <span class="charliteral">&#39;l&#39;</span>)
<a name="l00244"></a>00244    {
<a name="l00245"></a>00245     <a class="code" href="_worker___complete_8c.html#af6f91371e1e080e892b7cb557a09967f">locations</a>[<a class="code" href="_worker___complete_8c.html#a0094a4792faa200e95699857daa39e44">location_cnt</a>] = 7;
<a name="l00246"></a>00246     <a class="code" href="_worker___complete_8c.html#a0094a4792faa200e95699857daa39e44">location_cnt</a>++;
<a name="l00247"></a>00247     <span class="keywordflow">break</span>;
<a name="l00248"></a>00248    }
<a name="l00249"></a>00249    <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<a class="code" href="_line_follower_counter_8c.html#af48e0311746bc01574a90f142220e748">command</a> == <span class="charliteral">&#39;h&#39;</span>)
<a name="l00250"></a>00250    {
<a name="l00251"></a>00251     <a class="code" href="_worker___complete_8c.html#afce64baa3e3238dc386a187fd9f753ac">armHeight</a> = 70;
<a name="l00252"></a>00252     <a class="code" href="_worker___complete_8c.html#a8cab34bde264a770ce4df4c6676fc0bc">recievedHeight</a> = 1;
<a name="l00253"></a>00253     <span class="keywordflow">break</span>;
<a name="l00254"></a>00254    }
<a name="l00255"></a>00255    <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<a class="code" href="_line_follower_counter_8c.html#af48e0311746bc01574a90f142220e748">command</a> == <span class="charliteral">&#39;d&#39;</span>)
<a name="l00256"></a>00256    {
<a name="l00257"></a>00257     <span class="keywordflow">break</span>;
<a name="l00258"></a>00258    } 
<a name="l00259"></a>00259   }
<a name="l00260"></a>00260   
<a name="l00261"></a>00261   <span class="keywordflow">case</span> 0x38:
<a name="l00262"></a>00262   {
<a name="l00263"></a>00263    <span class="keywordflow">if</span>(<a class="code" href="_line_follower_counter_8c.html#af48e0311746bc01574a90f142220e748">command</a> == <span class="charliteral">&#39;l&#39;</span>)
<a name="l00264"></a>00264    {
<a name="l00265"></a>00265     <a class="code" href="_worker___complete_8c.html#af6f91371e1e080e892b7cb557a09967f">locations</a>[<a class="code" href="_worker___complete_8c.html#a0094a4792faa200e95699857daa39e44">location_cnt</a>] = 8;
<a name="l00266"></a>00266     <a class="code" href="_worker___complete_8c.html#a0094a4792faa200e95699857daa39e44">location_cnt</a>++;
<a name="l00267"></a>00267     <span class="keywordflow">break</span>;
<a name="l00268"></a>00268    }
<a name="l00269"></a>00269    <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<a class="code" href="_line_follower_counter_8c.html#af48e0311746bc01574a90f142220e748">command</a> == <span class="charliteral">&#39;h&#39;</span>)
<a name="l00270"></a>00270    {
<a name="l00271"></a>00271     <a class="code" href="_worker___complete_8c.html#afce64baa3e3238dc386a187fd9f753ac">armHeight</a> = 80;
<a name="l00272"></a>00272     <a class="code" href="_worker___complete_8c.html#a8cab34bde264a770ce4df4c6676fc0bc">recievedHeight</a> = 1;
<a name="l00273"></a>00273     <span class="keywordflow">break</span>;
<a name="l00274"></a>00274    }
<a name="l00275"></a>00275    <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<a class="code" href="_line_follower_counter_8c.html#af48e0311746bc01574a90f142220e748">command</a> == <span class="charliteral">&#39;d&#39;</span>)
<a name="l00276"></a>00276    {
<a name="l00277"></a>00277     <span class="keywordflow">break</span>;
<a name="l00278"></a>00278    } 
<a name="l00279"></a>00279   }
<a name="l00280"></a>00280 
<a name="l00281"></a>00281   
<a name="l00282"></a>00282   <span class="keywordflow">case</span> 0x39:
<a name="l00283"></a>00283   {
<a name="l00284"></a>00284    <span class="keywordflow">if</span>(<a class="code" href="_line_follower_counter_8c.html#af48e0311746bc01574a90f142220e748">command</a> == <span class="charliteral">&#39;l&#39;</span>)
<a name="l00285"></a>00285    {
<a name="l00286"></a>00286     <a class="code" href="_worker___complete_8c.html#af6f91371e1e080e892b7cb557a09967f">locations</a>[<a class="code" href="_worker___complete_8c.html#a0094a4792faa200e95699857daa39e44">location_cnt</a>] = 9;
<a name="l00287"></a>00287     <a class="code" href="_worker___complete_8c.html#a0094a4792faa200e95699857daa39e44">location_cnt</a>++;
<a name="l00288"></a>00288     <span class="keywordflow">break</span>;
<a name="l00289"></a>00289    }
<a name="l00290"></a>00290    <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<a class="code" href="_line_follower_counter_8c.html#af48e0311746bc01574a90f142220e748">command</a> == <span class="charliteral">&#39;h&#39;</span>)
<a name="l00291"></a>00291    {
<a name="l00292"></a>00292     <a class="code" href="_worker___complete_8c.html#afce64baa3e3238dc386a187fd9f753ac">armHeight</a> = 90;
<a name="l00293"></a>00293     <a class="code" href="_worker___complete_8c.html#a8cab34bde264a770ce4df4c6676fc0bc">recievedHeight</a> = 1;
<a name="l00294"></a>00294     <span class="keywordflow">break</span>;
<a name="l00295"></a>00295    }
<a name="l00296"></a>00296    <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<a class="code" href="_line_follower_counter_8c.html#af48e0311746bc01574a90f142220e748">command</a> == <span class="charliteral">&#39;d&#39;</span>)
<a name="l00297"></a>00297    {
<a name="l00298"></a>00298     <span class="keywordflow">break</span>;
<a name="l00299"></a>00299    } 
<a name="l00300"></a>00300   }
<a name="l00301"></a>00301  }
<a name="l00302"></a>00302 
<a name="l00303"></a>00303 }
<a name="l00304"></a>00304 
<a name="l00306"></a><a class="code" href="_worker___complete_8c.html#a213460c7ccffed0cb4ad28fd34c62ba8">00306</a> <span class="keywordtype">int</span> <a class="code" href="_worker___complete_8c.html#a213460c7ccffed0cb4ad28fd34c62ba8" title="Calculate the exact distance of an object from the front of the robot in mm.">frontDist</a>()
<a name="l00307"></a>00307 {
<a name="l00308"></a>00308  <span class="keywordtype">int</span> objDist = <a class="code" href="_scout___robot_2ir_8h.html#aa09e87277c2c166936627a82126aac42">front_dist_mm</a>();
<a name="l00309"></a>00309 
<a name="l00310"></a>00310  <span class="keywordtype">float</span> readDist = (float) objDist;
<a name="l00311"></a>00311  <span class="keywordtype">float</span> actualDist =  readDist/2.75; <span class="comment">//calbiration value</span>
<a name="l00312"></a>00312 
<a name="l00313"></a>00313  <span class="keywordflow">return</span> (<span class="keywordtype">int</span>) actualDist;
<a name="l00314"></a>00314 }
<a name="l00315"></a>00315 
<a name="l00317"></a><a class="code" href="_worker___complete_8c.html#a0c9df54dbd6d34b2f4148de0c3de923b">00317</a> <span class="keywordtype">void</span> <a class="code" href="_worker___complete_8c.html#a0c9df54dbd6d34b2f4148de0c3de923b" title="Moves the worker Robot towards the object to be collected depending on how far the...">moveToObj</a>()
<a name="l00318"></a>00318 {
<a name="l00319"></a>00319  <span class="keywordtype">int</span> constArmDist = 0; 
<a name="l00320"></a>00320  <span class="keywordtype">int</span> objDist = <a class="code" href="_worker___complete_8c.html#a213460c7ccffed0cb4ad28fd34c62ba8" title="Calculate the exact distance of an object from the front of the robot in mm.">frontDist</a>();
<a name="l00321"></a>00321 
<a name="l00322"></a>00322  <a class="code" href="_worker___complete_8c.html#a62d19f1b68cc51e55723b31a29cdef78">dist</a> = 0;
<a name="l00323"></a>00323  <span class="keywordflow">while</span>(objDist &gt; 40)
<a name="l00324"></a>00324  {
<a name="l00325"></a>00325   <a class="code" href="_worker___complete_2motion_8h.html#a3a0711f34af615c274e67a580696f9ad">forward_mm</a>(10);
<a name="l00326"></a>00326   objDist = <a class="code" href="_worker___complete_8c.html#a213460c7ccffed0cb4ad28fd34c62ba8" title="Calculate the exact distance of an object from the front of the robot in mm.">frontDist</a>();
<a name="l00327"></a>00327   <a class="code" href="_worker___complete_8c.html#a62d19f1b68cc51e55723b31a29cdef78">dist</a>= <a class="code" href="_worker___complete_8c.html#a62d19f1b68cc51e55723b31a29cdef78">dist</a> +10;
<a name="l00328"></a>00328  }
<a name="l00329"></a>00329  
<a name="l00330"></a>00330  <a class="code" href="_worker___complete_2motion_8h.html#a3a0711f34af615c274e67a580696f9ad">forward_mm</a>(10);
<a name="l00331"></a>00331  <a class="code" href="_worker___complete_8c.html#a62d19f1b68cc51e55723b31a29cdef78">dist</a> = <a class="code" href="_worker___complete_8c.html#a62d19f1b68cc51e55723b31a29cdef78">dist</a> + 10;
<a name="l00332"></a>00332 }
<a name="l00333"></a>00333 
<a name="l00335"></a><a class="code" href="_worker___complete_8c.html#aead7681c698f81d34a9ee6d6e0c57482">00335</a> <span class="keywordtype">void</span> <a class="code" href="_worker___complete_8c.html#aead7681c698f81d34a9ee6d6e0c57482" title="After grabbing the object move the robot backward by the distance specified.">backOffObj</a>(<span class="keywordtype">int</span> mm)
<a name="l00336"></a>00336 {
<a name="l00337"></a>00337  <a class="code" href="_worker___complete_2motion_8h.html#a211524abdbae5dd0a77807b843ec60c7">back_mm</a>(mm);
<a name="l00338"></a>00338 }
<a name="l00339"></a>00339 
<a name="l00340"></a>00340 
<a name="l00342"></a><a class="code" href="_worker___complete_8c.html#a32c4d0c2e2411ca3237d45985abdcaf7">00342</a> <span class="keywordtype">void</span> <a class="code" href="_worker___complete_8c.html#a32c4d0c2e2411ca3237d45985abdcaf7" title="This function is used to rotate the robot back to the white line.">turnToLine</a>()
<a name="l00343"></a>00343 {
<a name="l00344"></a>00344  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> whiteSensor = <a class="code" href="_scout___robot_2whiteline_8h.html#a27221abefd1283fe0f4eaad78abbf59f">LIGHT_RIGHT</a>;
<a name="l00345"></a>00345  
<a name="l00346"></a>00346  <span class="keywordflow">while</span>(whiteSensor &gt; <a class="code" href="_line_follower_counter_8c.html#a492e7b58ed599c481757fecb578af24e">maxWhite</a>)
<a name="l00347"></a>00347  {
<a name="l00348"></a>00348   <a class="code" href="_worker___complete_2motion_8h.html#aef3c7f13796512f56db32b784ca4c651">LEFT_TURN_BY</a>(10);
<a name="l00349"></a>00349   _delay_ms(100);
<a name="l00350"></a>00350   whiteSensor = <a class="code" href="_scout___robot_2whiteline_8h.html#a27221abefd1283fe0f4eaad78abbf59f">LIGHT_RIGHT</a>;
<a name="l00351"></a>00351  }
<a name="l00352"></a>00352 }
<a name="l00353"></a>00353 
<a name="l00354"></a>00354 
<a name="l00355"></a>00355 
<a name="l00357"></a><a class="code" href="_worker___complete_8c.html#a744180995c9d3d93c82f9314d9f1fbbe">00357</a> <span class="keywordtype">void</span> <a class="code" href="_worker___complete_8c.html#a744180995c9d3d93c82f9314d9f1fbbe" title="Once the worker robot reaches the specifed location where the object was detected...">CollectFruit</a>()
<a name="l00358"></a>00358 {
<a name="l00359"></a>00359 
<a name="l00360"></a>00360  <span class="keywordtype">int</span> forwardMoved;
<a name="l00361"></a>00361 
<a name="l00362"></a>00362  <span class="keywordtype">int</span> objDist;
<a name="l00363"></a>00363  
<a name="l00364"></a>00364  <span class="keywordtype">int</span> <a class="code" href="_scout___robot_2lcd_8h.html#a13006074294a071b6c7a268a498f77f7">temp</a> =  120;
<a name="l00365"></a>00365  
<a name="l00366"></a>00366  <a class="code" href="_scout___robot_2buzzer_8h.html#a7822c093795c72a5eaf02b9efa914915">BUZZER_ON</a>();
<a name="l00367"></a>00367  <a class="code" href="_scout___robot_2motion_8h.html#a94ac7b12f6316deea91243b154b7abb4">STOP</a>();
<a name="l00368"></a>00368  <span class="comment">//set new speed</span>
<a name="l00369"></a>00369 
<a name="l00370"></a>00370  <a class="code" href="_scout___robot_2motion_8h.html#aad2b5c3032b6186491dea9117e5fa608">MOTOR_LEFT_SPEED</a>(200);
<a name="l00371"></a>00371  <a class="code" href="_scout___robot_2motion_8h.html#aa9a316d01b0ac2faac57c463de947ff8">MOTOR_RIGHT_SPEED</a>(200);
<a name="l00372"></a>00372 
<a name="l00373"></a>00373  <span class="comment">//turn right</span>
<a name="l00374"></a>00374  <a class="code" href="_worker___complete_2motion_8h.html#ac66d8febdb0927d499eb451e211ec6db">RIGHT_TURN_BY</a>(83);
<a name="l00375"></a>00375  _delay_ms(2000);
<a name="l00376"></a>00376 
<a name="l00377"></a>00377  
<a name="l00378"></a>00378  
<a name="l00379"></a>00379  <a class="code" href="_arm___control_8h.html#ad2b1808565325be9ef77569358971868" title="Function to rotate Camera to face front.">CameraMiddle</a>();
<a name="l00380"></a>00380  _delay_ms(2000);
<a name="l00381"></a>00381 
<a name="l00382"></a>00382  <span class="comment">//send IR reading to server</span>
<a name="l00383"></a>00383  UDR0 = (0x0f &amp; 1); 
<a name="l00384"></a>00384  
<a name="l00385"></a>00385  <span class="comment">//server does DIP</span>
<a name="l00386"></a>00386 
<a name="l00387"></a>00387 
<a name="l00388"></a>00388  <span class="comment">//wait for height info from server</span>
<a name="l00389"></a>00389  <span class="keywordflow">while</span>(1)
<a name="l00390"></a>00390  {
<a name="l00391"></a>00391   <span class="keywordflow">if</span>(<a class="code" href="_worker___complete_8c.html#a8cab34bde264a770ce4df4c6676fc0bc">recievedHeight</a> == 1)
<a name="l00392"></a>00392   {
<a name="l00393"></a>00393    <a class="code" href="_worker___complete_8c.html#a8cab34bde264a770ce4df4c6676fc0bc">recievedHeight</a> = 0;
<a name="l00394"></a>00394    <span class="keywordflow">break</span>;
<a name="l00395"></a>00395   }
<a name="l00396"></a>00396  }
<a name="l00397"></a>00397 
<a name="l00398"></a>00398  <span class="comment">//</span>
<a name="l00399"></a>00399  _delay_ms(2000);
<a name="l00400"></a>00400  <a class="code" href="_arm___control_8h.html#a94c93747c8daa99d65c2a04c6be0748c" title="Function to release object from the grabber.">Release</a>();
<a name="l00401"></a>00401 
<a name="l00402"></a>00402   
<a name="l00403"></a>00403  _delay_ms(2000);
<a name="l00404"></a>00404  <a class="code" href="_arm___control_8h.html#a64ae6c440a4ed9892bdde8c4ae8de660">Lift</a>(<a class="code" href="_worker___complete_8c.html#afce64baa3e3238dc386a187fd9f753ac">armHeight</a>);
<a name="l00405"></a>00405  
<a name="l00406"></a>00406  objDist = <a class="code" href="_worker___complete_8c.html#a213460c7ccffed0cb4ad28fd34c62ba8" title="Calculate the exact distance of an object from the front of the robot in mm.">frontDist</a>();
<a name="l00407"></a>00407 
<a name="l00408"></a>00408  <a class="code" href="_worker___complete_8c.html#a0c9df54dbd6d34b2f4148de0c3de923b" title="Moves the worker Robot towards the object to be collected depending on how far the...">moveToObj</a>();
<a name="l00409"></a>00409 
<a name="l00410"></a>00410  <a class="code" href="_scout___robot_2lcd_8h.html#a71edb5dcd2805c0f4fc1526910d44136">LCD_DISPLAY_INT_2</a>(objDist);
<a name="l00411"></a>00411  
<a name="l00412"></a>00412  _delay_ms(2000);
<a name="l00413"></a>00413  <a class="code" href="_arm___control_8h.html#a8f50362140c38ff47031e158a04540a5" title="Function to grab object with the grabber. You can modify the values of grabberClose...">Grab</a>();
<a name="l00414"></a>00414 
<a name="l00415"></a>00415  _delay_ms(2000);
<a name="l00416"></a>00416  <a class="code" href="_arm___control_8h.html#a64ae6c440a4ed9892bdde8c4ae8de660">Lift</a>(90);
<a name="l00417"></a>00417 
<a name="l00418"></a>00418  
<a name="l00419"></a>00419  <a class="code" href="_worker___complete_2motion_8h.html#a211524abdbae5dd0a77807b843ec60c7">back_mm</a>(objDist);
<a name="l00420"></a>00420 <span class="comment">// backOffObj(forwardMoved);</span>
<a name="l00421"></a>00421 
<a name="l00422"></a>00422  _delay_ms(2000);
<a name="l00423"></a>00423  <a class="code" href="_arm___control_8h.html#a94c93747c8daa99d65c2a04c6be0748c" title="Function to release object from the grabber.">Release</a>();
<a name="l00424"></a>00424  
<a name="l00425"></a>00425  <span class="comment">//Tutn to original place</span>
<a name="l00426"></a>00426  _delay_ms(5000);
<a name="l00427"></a>00427  <span class="comment">//LEFT_TURN_BY(83);</span>
<a name="l00428"></a>00428  <a class="code" href="_worker___complete_8c.html#a32c4d0c2e2411ca3237d45985abdcaf7" title="This function is used to rotate the robot back to the white line.">turnToLine</a>(); 
<a name="l00429"></a>00429 
<a name="l00430"></a>00430  _delay_ms(2000);
<a name="l00431"></a>00431  <a class="code" href="_arm___control_8h.html#a2916657630de9105936250904d7611a7" title="Function to lower the arm gripper to position 0.">Lower</a>();
<a name="l00432"></a>00432 
<a name="l00433"></a>00433  
<a name="l00434"></a>00434   _delay_ms(2000);
<a name="l00435"></a>00435  <a class="code" href="_arm___control_8h.html#ab4d1826737c5c1d7d1d34e0f3e3d7006" title="Function to rotate Camera to face Right.">CameraRight</a>();
<a name="l00436"></a>00436  
<a name="l00437"></a>00437 
<a name="l00438"></a>00438 
<a name="l00439"></a>00439   _delay_ms(2000);
<a name="l00440"></a>00440   <a class="code" href="_arm___control_8h.html#a6c7ed6efeeb194c0a0c511380a31a2e5">servo_1_free</a>();
<a name="l00441"></a>00441   <a class="code" href="_arm___control_8h.html#ada43b85d1e8c8343f99fcdaa12b71c3e">servo_2_free</a>();
<a name="l00442"></a>00442   <a class="code" href="_arm___control_8h.html#a24305cafe8f6103e8434f56aa0df538a">servo_3_free</a>();
<a name="l00443"></a>00443 
<a name="l00444"></a>00444   
<a name="l00445"></a>00445   <a class="code" href="_line_follower_counter_8c.html#a2214cded400f5f10aff4dced11b10b78">prevState</a> = 1;
<a name="l00446"></a>00446   <a class="code" href="_line_follower_counter_8c.html#a0971b43360abc733cbc1b30a1282c663">sendOnce</a> = 1;
<a name="l00447"></a>00447 }
<a name="l00448"></a>00448 
<a name="l00450"></a><a class="code" href="_worker___complete_8c.html#a6288eba0f8e8ad3ab1544ad731eb7667">00450</a> <span class="keywordtype">void</span> <a class="code" href="_line_follower_counter_8c.html#a6288eba0f8e8ad3ab1544ad731eb7667" title="Moves the scout robot to scan the field.">main</a>(<span class="keywordtype">void</span>)
<a name="l00451"></a>00451 {
<a name="l00452"></a>00452  <a class="code" href="_scout___robot_2firebird__winavr_8h.html#ab01199c927ceda6f9520c7afb0f1b099">init_devices</a>(); <span class="comment">//defined in firebird_winavr.h.  It initialize all necessary ports for LCD, Buzzer, Motion control and IR sensor.</span>
<a name="l00453"></a>00453  <a class="code" href="_line_follower_counter_8c.html#a1d7b72031fa39d396d531503904f337b">position</a> = 0;
<a name="l00454"></a>00454  <a class="code" href="_scout___robot_2firebird__winavr_8h.html#a0488fb29bb9c094d6b89d273d6ae3f1d">init_dist_measure</a>();
<a name="l00455"></a>00455 
<a name="l00456"></a>00456 
<a name="l00457"></a>00457  UCSR0B = UCSR0B | 0x10; <span class="comment">//set bit4 = rx enables</span>
<a name="l00458"></a>00458  UCSR0B = UCSR0B | 0x08; <span class="comment">//set bit3 = tx enable</span>
<a name="l00459"></a>00459  UCSR0B = UCSR0B | 0x80;  <span class="comment">//bit-7 enable rx-complet interrupt</span>
<a name="l00460"></a>00460  
<a name="l00461"></a>00461  <a class="code" href="_arm___control_8h.html#ab4d1826737c5c1d7d1d34e0f3e3d7006" title="Function to rotate Camera to face Right.">CameraRight</a>();
<a name="l00462"></a>00462  _delay_ms(2000);
<a name="l00463"></a>00463  
<a name="l00464"></a>00464  <a class="code" href="_arm___control_8h.html#a2916657630de9105936250904d7611a7" title="Function to lower the arm gripper to position 0.">Lower</a>();
<a name="l00465"></a>00465  _delay_ms(2000);
<a name="l00466"></a>00466 
<a name="l00467"></a>00467 
<a name="l00468"></a>00468  <span class="keywordflow">while</span>(1)
<a name="l00469"></a>00469  {
<a name="l00470"></a>00470   <a class="code" href="_line_follower_counter_8c.html#a6a88a42d06770ea17c78a8368b29e4ce">RIGHT_WHITELINE_VALUE</a> = <a class="code" href="_scout___robot_2whiteline_8h.html#a27221abefd1283fe0f4eaad78abbf59f">LIGHT_RIGHT</a>; <span class="comment">//LIGHT_RIGHT is a macro defines in firebird_winavr.h which returns the right whiteline sensor value.</span>
<a name="l00471"></a>00471   <a class="code" href="_line_follower_counter_8c.html#a0ae7d1d7c31810a587fe0091c8aa12d8">MIDDLE_WHITELINE_VALUE</a> = <a class="code" href="_scout___robot_2whiteline_8h.html#ad5cfd63ed1c0efa91baa26719447338c">LIGHT_MIDDLE</a>; <span class="comment">// Similar</span>
<a name="l00472"></a>00472   <a class="code" href="_line_follower_counter_8c.html#a6c90d82e3056adb1bbd594030944d3d5">LEFT_WHITELINE_VALUE</a> = <a class="code" href="_scout___robot_2whiteline_8h.html#a7ca35d36f72e4e158285f753176c4275">LIGHT_LEFT</a>; <span class="comment">// Similar</span>
<a name="l00473"></a>00473    
<a name="l00474"></a>00474   <a class="code" href="_line_follower_counter_8c.html#afa5f52316976b037653d0964815ca85f">FRONT_IR_VALUE</a> = <a class="code" href="_worker___complete_8c.html#a213460c7ccffed0cb4ad28fd34c62ba8" title="Calculate the exact distance of an object from the front of the robot in mm.">frontDist</a>();
<a name="l00475"></a>00475   
<a name="l00476"></a>00476 
<a name="l00477"></a>00477   <a class="code" href="_scout___robot_2lcd_8h.html#a71edb5dcd2805c0f4fc1526910d44136">LCD_DISPLAY_INT_2</a>(<a class="code" href="_line_follower_counter_8c.html#afa5f52316976b037653d0964815ca85f">FRONT_IR_VALUE</a>); <span class="comment">// Displays IR sensor value on first line of LCD</span>
<a name="l00478"></a>00478   <a class="code" href="_scout___robot_2lcd_8h.html#ad338066e1bb54461c273b872652bd5b9">LCD_DISPLAY_INT_1</a>(<a class="code" href="_worker___complete_8c.html#af6f91371e1e080e892b7cb557a09967f">locations</a>[<a class="code" href="_worker___complete_8c.html#a0094a4792faa200e95699857daa39e44">location_cnt</a> - 1]);
<a name="l00479"></a>00479 
<a name="l00480"></a>00480 
<a name="l00481"></a>00481   <span class="keywordflow">if</span>(<a class="code" href="_line_follower_counter_8c.html#a6a88a42d06770ea17c78a8368b29e4ce">RIGHT_WHITELINE_VALUE</a> &lt; <a class="code" href="_line_follower_counter_8c.html#a492e7b58ed599c481757fecb578af24e">maxWhite</a> &amp;&amp; <a class="code" href="_line_follower_counter_8c.html#a0ae7d1d7c31810a587fe0091c8aa12d8">MIDDLE_WHITELINE_VALUE</a> &lt; <a class="code" href="_line_follower_counter_8c.html#a492e7b58ed599c481757fecb578af24e">maxWhite</a> &amp;&amp; <a class="code" href="_line_follower_counter_8c.html#a6c90d82e3056adb1bbd594030944d3d5">LEFT_WHITELINE_VALUE</a> &lt; <a class="code" href="_line_follower_counter_8c.html#a492e7b58ed599c481757fecb578af24e">maxWhite</a> &amp;&amp; <a class="code" href="_line_follower_counter_8c.html#a2214cded400f5f10aff4dced11b10b78">prevState</a> == 1 &amp;&amp; <a class="code" href="_line_follower_counter_8c.html#a1d7b72031fa39d396d531503904f337b">position</a> &lt; <a class="code" href="_worker___complete_8c.html#af6f91371e1e080e892b7cb557a09967f">locations</a>[<a class="code" href="_worker___complete_8c.html#a7e9985ffcfd3a067c906d1e4f70f34eb">locations_scanned</a>])
<a name="l00482"></a>00482   {
<a name="l00483"></a>00483    <a class="code" href="_scout___robot_2motion_8h.html#aad2b5c3032b6186491dea9117e5fa608">MOTOR_LEFT_SPEED</a>(<a class="code" href="_line_follower_counter_8c.html#ad9aab8b396b3cc6d5ec886ed89c08848">fastSpeed</a>);
<a name="l00484"></a>00484    <a class="code" href="_scout___robot_2motion_8h.html#aa9a316d01b0ac2faac57c463de947ff8">MOTOR_RIGHT_SPEED</a>(<a class="code" href="_line_follower_counter_8c.html#ad9aab8b396b3cc6d5ec886ed89c08848">fastSpeed</a>);
<a name="l00485"></a>00485    <a class="code" href="_scout___robot_2motion_8h.html#a2590e4ebe90aee4206d58ff6c1a64ef5">MOVE_FWD</a>();
<a name="l00486"></a>00486    
<a name="l00487"></a>00487    <a class="code" href="_line_follower_counter_8c.html#a227e31138c9cd9e9c85f9f3353cb503d">startBlack</a> = 1;
<a name="l00488"></a>00488    <a class="code" href="_line_follower_counter_8c.html#a2214cded400f5f10aff4dced11b10b78">prevState</a> = 1;
<a name="l00489"></a>00489    <a class="code" href="_line_follower_counter_8c.html#a34c0c3ce843ecb8ee20be9eee84cac2d">prevLeftSpeed</a> = <a class="code" href="_line_follower_counter_8c.html#ad9aab8b396b3cc6d5ec886ed89c08848">fastSpeed</a>;
<a name="l00490"></a>00490    <a class="code" href="_line_follower_counter_8c.html#ab85651c35258527ad41ce8f20ea34135">prevRightSpeed</a> = <a class="code" href="_line_follower_counter_8c.html#ad9aab8b396b3cc6d5ec886ed89c08848">fastSpeed</a>;
<a name="l00491"></a>00491   }
<a name="l00492"></a>00492   <span class="keywordflow">else</span>
<a name="l00493"></a>00493   {
<a name="l00494"></a>00494    <span class="keywordflow">if</span>(<a class="code" href="_line_follower_counter_8c.html#a6a88a42d06770ea17c78a8368b29e4ce">RIGHT_WHITELINE_VALUE</a> &lt; <a class="code" href="_line_follower_counter_8c.html#a492e7b58ed599c481757fecb578af24e">maxWhite</a> &amp;&amp; <a class="code" href="_line_follower_counter_8c.html#a0ae7d1d7c31810a587fe0091c8aa12d8">MIDDLE_WHITELINE_VALUE</a> &lt; <a class="code" href="_line_follower_counter_8c.html#a492e7b58ed599c481757fecb578af24e">maxWhite</a>  &amp;&amp; <a class="code" href="_line_follower_counter_8c.html#a2214cded400f5f10aff4dced11b10b78">prevState</a> == 1 &amp;&amp; <a class="code" href="_line_follower_counter_8c.html#a1d7b72031fa39d396d531503904f337b">position</a> &lt; <a class="code" href="_worker___complete_8c.html#af6f91371e1e080e892b7cb557a09967f">locations</a>[locations_scanned])
<a name="l00495"></a>00495    {
<a name="l00496"></a>00496     <a class="code" href="_scout___robot_2motion_8h.html#aad2b5c3032b6186491dea9117e5fa608">MOTOR_LEFT_SPEED</a>(<a class="code" href="_line_follower_counter_8c.html#ad9aab8b396b3cc6d5ec886ed89c08848">fastSpeed</a>);
<a name="l00497"></a>00497     <a class="code" href="_scout___robot_2motion_8h.html#aa9a316d01b0ac2faac57c463de947ff8">MOTOR_RIGHT_SPEED</a>(<a class="code" href="_line_follower_counter_8c.html#a496e53769bd08930fd22618690e20621">mediumSpeed</a>);
<a name="l00498"></a>00498     <a class="code" href="_scout___robot_2motion_8h.html#a2590e4ebe90aee4206d58ff6c1a64ef5">MOVE_FWD</a>();
<a name="l00499"></a>00499 
<a name="l00500"></a>00500     <a class="code" href="_line_follower_counter_8c.html#a227e31138c9cd9e9c85f9f3353cb503d">startBlack</a> = 1;
<a name="l00501"></a>00501     <a class="code" href="_line_follower_counter_8c.html#a2214cded400f5f10aff4dced11b10b78">prevState</a> = 1;
<a name="l00502"></a>00502     <a class="code" href="_line_follower_counter_8c.html#a34c0c3ce843ecb8ee20be9eee84cac2d">prevLeftSpeed</a> = <a class="code" href="_line_follower_counter_8c.html#ad9aab8b396b3cc6d5ec886ed89c08848">fastSpeed</a>;
<a name="l00503"></a>00503     <a class="code" href="_line_follower_counter_8c.html#ab85651c35258527ad41ce8f20ea34135">prevRightSpeed</a> = <a class="code" href="_line_follower_counter_8c.html#a496e53769bd08930fd22618690e20621">mediumSpeed</a>;
<a name="l00504"></a>00504    }
<a name="l00505"></a>00505    <span class="keywordflow">else</span>
<a name="l00506"></a>00506    {
<a name="l00507"></a>00507     <span class="keywordflow">if</span>(<a class="code" href="_line_follower_counter_8c.html#a0ae7d1d7c31810a587fe0091c8aa12d8">MIDDLE_WHITELINE_VALUE</a> &lt; <a class="code" href="_line_follower_counter_8c.html#a492e7b58ed599c481757fecb578af24e">maxWhite</a> &amp;&amp; <a class="code" href="_line_follower_counter_8c.html#a6c90d82e3056adb1bbd594030944d3d5">LEFT_WHITELINE_VALUE</a> &lt; <a class="code" href="_line_follower_counter_8c.html#a492e7b58ed599c481757fecb578af24e">maxWhite</a>  &amp;&amp; <a class="code" href="_line_follower_counter_8c.html#a2214cded400f5f10aff4dced11b10b78">prevState</a> == 1 &amp;&amp; <a class="code" href="_line_follower_counter_8c.html#a1d7b72031fa39d396d531503904f337b">position</a> &lt; <a class="code" href="_worker___complete_8c.html#af6f91371e1e080e892b7cb557a09967f">locations</a>[locations_scanned])
<a name="l00508"></a>00508     {
<a name="l00509"></a>00509      <a class="code" href="_scout___robot_2motion_8h.html#aad2b5c3032b6186491dea9117e5fa608">MOTOR_LEFT_SPEED</a>(<a class="code" href="_line_follower_counter_8c.html#a496e53769bd08930fd22618690e20621">mediumSpeed</a>);
<a name="l00510"></a>00510      <a class="code" href="_scout___robot_2motion_8h.html#aa9a316d01b0ac2faac57c463de947ff8">MOTOR_RIGHT_SPEED</a>(<a class="code" href="_line_follower_counter_8c.html#ad9aab8b396b3cc6d5ec886ed89c08848">fastSpeed</a>);
<a name="l00511"></a>00511      <a class="code" href="_scout___robot_2motion_8h.html#a2590e4ebe90aee4206d58ff6c1a64ef5">MOVE_FWD</a>();
<a name="l00512"></a>00512 
<a name="l00513"></a>00513      <a class="code" href="_line_follower_counter_8c.html#a227e31138c9cd9e9c85f9f3353cb503d">startBlack</a> = 1;
<a name="l00514"></a>00514      <a class="code" href="_line_follower_counter_8c.html#a2214cded400f5f10aff4dced11b10b78">prevState</a> = 1;
<a name="l00515"></a>00515      <a class="code" href="_line_follower_counter_8c.html#a34c0c3ce843ecb8ee20be9eee84cac2d">prevLeftSpeed</a> = <a class="code" href="_line_follower_counter_8c.html#a496e53769bd08930fd22618690e20621">mediumSpeed</a>;
<a name="l00516"></a>00516      <a class="code" href="_line_follower_counter_8c.html#ab85651c35258527ad41ce8f20ea34135">prevRightSpeed</a> = <a class="code" href="_line_follower_counter_8c.html#ad9aab8b396b3cc6d5ec886ed89c08848">fastSpeed</a>;
<a name="l00517"></a>00517     }
<a name="l00518"></a>00518     <span class="keywordflow">else</span>
<a name="l00519"></a>00519     {
<a name="l00520"></a>00520      <span class="keywordflow">if</span>(<a class="code" href="_line_follower_counter_8c.html#a6a88a42d06770ea17c78a8368b29e4ce">RIGHT_WHITELINE_VALUE</a> &lt; <a class="code" href="_line_follower_counter_8c.html#a492e7b58ed599c481757fecb578af24e">maxWhite</a>  &amp;&amp; <a class="code" href="_line_follower_counter_8c.html#a2214cded400f5f10aff4dced11b10b78">prevState</a> == 1 &amp;&amp; <a class="code" href="_line_follower_counter_8c.html#a1d7b72031fa39d396d531503904f337b">position</a> &lt; <a class="code" href="_worker___complete_8c.html#af6f91371e1e080e892b7cb557a09967f">locations</a>[locations_scanned])
<a name="l00521"></a>00521      {
<a name="l00522"></a>00522       <a class="code" href="_scout___robot_2motion_8h.html#aad2b5c3032b6186491dea9117e5fa608">MOTOR_LEFT_SPEED</a>(<a class="code" href="_line_follower_counter_8c.html#ad9aab8b396b3cc6d5ec886ed89c08848">fastSpeed</a>);
<a name="l00523"></a>00523       <a class="code" href="_scout___robot_2motion_8h.html#aa9a316d01b0ac2faac57c463de947ff8">MOTOR_RIGHT_SPEED</a>(<a class="code" href="_line_follower_counter_8c.html#a902c10aeadbed6441e1361ea8949cb7f">slowSpeed</a>);
<a name="l00524"></a>00524       <a class="code" href="_scout___robot_2motion_8h.html#a2590e4ebe90aee4206d58ff6c1a64ef5">MOVE_FWD</a>();
<a name="l00525"></a>00525 
<a name="l00526"></a>00526       <a class="code" href="_line_follower_counter_8c.html#a227e31138c9cd9e9c85f9f3353cb503d">startBlack</a> = 1;
<a name="l00527"></a>00527       <a class="code" href="_line_follower_counter_8c.html#a2214cded400f5f10aff4dced11b10b78">prevState</a> = 1;
<a name="l00528"></a>00528       <a class="code" href="_line_follower_counter_8c.html#a34c0c3ce843ecb8ee20be9eee84cac2d">prevLeftSpeed</a> = <a class="code" href="_line_follower_counter_8c.html#ad9aab8b396b3cc6d5ec886ed89c08848">fastSpeed</a>;
<a name="l00529"></a>00529       <a class="code" href="_line_follower_counter_8c.html#ab85651c35258527ad41ce8f20ea34135">prevRightSpeed</a> = <a class="code" href="_line_follower_counter_8c.html#a902c10aeadbed6441e1361ea8949cb7f">slowSpeed</a>;
<a name="l00530"></a>00530      }
<a name="l00531"></a>00531      <span class="keywordflow">else</span>
<a name="l00532"></a>00532      {
<a name="l00533"></a>00533       <span class="keywordflow">if</span>(<a class="code" href="_line_follower_counter_8c.html#a6c90d82e3056adb1bbd594030944d3d5">LEFT_WHITELINE_VALUE</a> &lt; <a class="code" href="_line_follower_counter_8c.html#a492e7b58ed599c481757fecb578af24e">maxWhite</a>  &amp;&amp; <a class="code" href="_line_follower_counter_8c.html#a2214cded400f5f10aff4dced11b10b78">prevState</a> == 1 &amp;&amp; <a class="code" href="_line_follower_counter_8c.html#a1d7b72031fa39d396d531503904f337b">position</a> &lt; <a class="code" href="_worker___complete_8c.html#af6f91371e1e080e892b7cb557a09967f">locations</a>[locations_scanned])
<a name="l00534"></a>00534       {
<a name="l00535"></a>00535        <a class="code" href="_scout___robot_2motion_8h.html#aad2b5c3032b6186491dea9117e5fa608">MOTOR_LEFT_SPEED</a>(<a class="code" href="_line_follower_counter_8c.html#a902c10aeadbed6441e1361ea8949cb7f">slowSpeed</a>);
<a name="l00536"></a>00536        <a class="code" href="_scout___robot_2motion_8h.html#aa9a316d01b0ac2faac57c463de947ff8">MOTOR_RIGHT_SPEED</a>(<a class="code" href="_line_follower_counter_8c.html#ad9aab8b396b3cc6d5ec886ed89c08848">fastSpeed</a>);
<a name="l00537"></a>00537        <a class="code" href="_scout___robot_2motion_8h.html#a2590e4ebe90aee4206d58ff6c1a64ef5">MOVE_FWD</a>();
<a name="l00538"></a>00538 
<a name="l00539"></a>00539        <a class="code" href="_line_follower_counter_8c.html#a227e31138c9cd9e9c85f9f3353cb503d">startBlack</a> = 1;
<a name="l00540"></a>00540        <a class="code" href="_line_follower_counter_8c.html#a2214cded400f5f10aff4dced11b10b78">prevState</a> = 1;
<a name="l00541"></a>00541        <a class="code" href="_line_follower_counter_8c.html#a34c0c3ce843ecb8ee20be9eee84cac2d">prevLeftSpeed</a> = <a class="code" href="_line_follower_counter_8c.html#a902c10aeadbed6441e1361ea8949cb7f">slowSpeed</a>;
<a name="l00542"></a>00542        <a class="code" href="_line_follower_counter_8c.html#ab85651c35258527ad41ce8f20ea34135">prevRightSpeed</a> = <a class="code" href="_line_follower_counter_8c.html#ad9aab8b396b3cc6d5ec886ed89c08848">fastSpeed</a>;
<a name="l00543"></a>00543       }
<a name="l00544"></a>00544       <span class="keywordflow">else</span>
<a name="l00545"></a>00545       {
<a name="l00546"></a>00546        <span class="keywordflow">if</span>(<a class="code" href="_line_follower_counter_8c.html#a0ae7d1d7c31810a587fe0091c8aa12d8">MIDDLE_WHITELINE_VALUE</a> &lt; <a class="code" href="_line_follower_counter_8c.html#a492e7b58ed599c481757fecb578af24e">maxWhite</a>  &amp;&amp; <a class="code" href="_line_follower_counter_8c.html#a2214cded400f5f10aff4dced11b10b78">prevState</a> == 1 &amp;&amp; <a class="code" href="_line_follower_counter_8c.html#a1d7b72031fa39d396d531503904f337b">position</a> &lt; <a class="code" href="_worker___complete_8c.html#af6f91371e1e080e892b7cb557a09967f">locations</a>[locations_scanned])
<a name="l00547"></a>00547        {
<a name="l00548"></a>00548         
<a name="l00549"></a>00549         <a class="code" href="_scout___robot_2motion_8h.html#aad2b5c3032b6186491dea9117e5fa608">MOTOR_LEFT_SPEED</a>(<a class="code" href="_line_follower_counter_8c.html#ad9aab8b396b3cc6d5ec886ed89c08848">fastSpeed</a>);
<a name="l00550"></a>00550         <a class="code" href="_scout___robot_2motion_8h.html#aa9a316d01b0ac2faac57c463de947ff8">MOTOR_RIGHT_SPEED</a>(<a class="code" href="_line_follower_counter_8c.html#ad9aab8b396b3cc6d5ec886ed89c08848">fastSpeed</a>);
<a name="l00551"></a>00551         <a class="code" href="_scout___robot_2motion_8h.html#a2590e4ebe90aee4206d58ff6c1a64ef5">MOVE_FWD</a>();
<a name="l00552"></a>00552 
<a name="l00553"></a>00553         <a class="code" href="_line_follower_counter_8c.html#a227e31138c9cd9e9c85f9f3353cb503d">startBlack</a> = 1;
<a name="l00554"></a>00554         <a class="code" href="_line_follower_counter_8c.html#a2214cded400f5f10aff4dced11b10b78">prevState</a> = 1;
<a name="l00555"></a>00555         <a class="code" href="_line_follower_counter_8c.html#a34c0c3ce843ecb8ee20be9eee84cac2d">prevLeftSpeed</a> = <a class="code" href="_line_follower_counter_8c.html#ad9aab8b396b3cc6d5ec886ed89c08848">fastSpeed</a>;
<a name="l00556"></a>00556         <a class="code" href="_line_follower_counter_8c.html#ab85651c35258527ad41ce8f20ea34135">prevRightSpeed</a> = <a class="code" href="_line_follower_counter_8c.html#ad9aab8b396b3cc6d5ec886ed89c08848">fastSpeed</a>;
<a name="l00557"></a>00557        }
<a name="l00558"></a>00558        <span class="keywordflow">else</span>  <span class="comment">// Here we need to increment the position counter, capture an image, transmit the image to centralized server along with position counter and move the robot to some precise distance so that it will cross the Black mark and proceed further.</span>
<a name="l00559"></a>00559        {
<a name="l00560"></a>00560         
<a name="l00561"></a>00561         <span class="keywordflow">if</span>(<a class="code" href="_line_follower_counter_8c.html#a227e31138c9cd9e9c85f9f3353cb503d">startBlack</a> ==1)
<a name="l00562"></a>00562         {
<a name="l00563"></a>00563          <a class="code" href="_line_follower_counter_8c.html#a1d7b72031fa39d396d531503904f337b">position</a>++;
<a name="l00564"></a>00564          <a class="code" href="_line_follower_counter_8c.html#a227e31138c9cd9e9c85f9f3353cb503d">startBlack</a> = 0;
<a name="l00565"></a>00565          <a class="code" href="_line_follower_counter_8c.html#a5004342352f04d68ff8f12c17ec2cf6f">completeBlack</a> = 0;
<a name="l00566"></a>00566          
<a name="l00567"></a>00567          <span class="comment">//start shaft counter by enabling inturupt 4 and 5</span>
<a name="l00568"></a>00568          <a class="code" href="_line_follower_counter_8c.html#ae515db750874720ff18664c8252ae6d8">ShaftCountLeft</a> = 0;
<a name="l00569"></a>00569          <a class="code" href="_line_follower_counter_8c.html#a871859f12e0b2563b435d6c3c6b2759e">ShaftCountRight</a> = 0;
<a name="l00570"></a>00570          <span class="keywordflow">if</span>(<a class="code" href="_line_follower_counter_8c.html#a1d7b72031fa39d396d531503904f337b">position</a> == <a class="code" href="_worker___complete_8c.html#af6f91371e1e080e892b7cb557a09967f">locations</a>[locations_scanned])
<a name="l00571"></a>00571          {
<a name="l00572"></a>00572           locations_scanned++;
<a name="l00573"></a>00573           <a class="code" href="_line_follower_counter_8c.html#a2214cded400f5f10aff4dced11b10b78">prevState</a> = 0; <span class="comment">//set prev state to black</span>
<a name="l00574"></a>00574          } 
<a name="l00575"></a>00575         }
<a name="l00576"></a>00576         <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<a class="code" href="_line_follower_counter_8c.html#a5004342352f04d68ff8f12c17ec2cf6f">completeBlack</a> == 1)  <span class="comment">//last stop</span>
<a name="l00577"></a>00577         {
<a name="l00578"></a>00578          <a class="code" href="_scout___robot_2motion_8h.html#aad2b5c3032b6186491dea9117e5fa608">MOTOR_LEFT_SPEED</a>(0);
<a name="l00579"></a>00579          <a class="code" href="_scout___robot_2motion_8h.html#aa9a316d01b0ac2faac57c463de947ff8">MOTOR_RIGHT_SPEED</a>(0);
<a name="l00580"></a>00580           
<a name="l00581"></a>00581          <a class="code" href="_line_follower_counter_8c.html#a1d7b72031fa39d396d531503904f337b">position</a> = 99;<span class="comment">//only for test</span>
<a name="l00582"></a>00582         }
<a name="l00583"></a>00583         <span class="comment">//if prevstate is black and u detect white line stop</span>
<a name="l00584"></a>00584         <span class="keywordflow">else</span> <span class="keywordflow">if</span>(<a class="code" href="_line_follower_counter_8c.html#a2214cded400f5f10aff4dced11b10b78">prevState</a> == 0 &amp;&amp; (<a class="code" href="_line_follower_counter_8c.html#a6a88a42d06770ea17c78a8368b29e4ce">RIGHT_WHITELINE_VALUE</a> &lt; <a class="code" href="_line_follower_counter_8c.html#a492e7b58ed599c481757fecb578af24e">maxWhite</a> || <a class="code" href="_line_follower_counter_8c.html#a0ae7d1d7c31810a587fe0091c8aa12d8">MIDDLE_WHITELINE_VALUE</a> &lt; <a class="code" href="_line_follower_counter_8c.html#a492e7b58ed599c481757fecb578af24e">maxWhite</a> || <a class="code" href="_line_follower_counter_8c.html#a6c90d82e3056adb1bbd594030944d3d5">LEFT_WHITELINE_VALUE</a> &lt; <a class="code" href="_line_follower_counter_8c.html#a492e7b58ed599c481757fecb578af24e">maxWhite</a>))
<a name="l00585"></a>00585         {
<a name="l00586"></a>00586          <a class="code" href="_scout___robot_2motion_8h.html#aad2b5c3032b6186491dea9117e5fa608">MOTOR_LEFT_SPEED</a>(0);
<a name="l00587"></a>00587          <a class="code" href="_scout___robot_2motion_8h.html#aa9a316d01b0ac2faac57c463de947ff8">MOTOR_RIGHT_SPEED</a>(0);
<a name="l00588"></a>00588          <a class="code" href="_scout___robot_2buzzer_8h.html#a7822c093795c72a5eaf02b9efa914915">BUZZER_ON</a>();
<a name="l00589"></a>00589          <a class="code" href="_worker___complete_8c.html#a744180995c9d3d93c82f9314d9f1fbbe" title="Once the worker robot reaches the specifed location where the object was detected...">CollectFruit</a>();
<a name="l00590"></a>00590         }
<a name="l00591"></a>00591         
<a name="l00592"></a>00592        }
<a name="l00593"></a>00593       }
<a name="l00594"></a>00594      }
<a name="l00595"></a>00595     }
<a name="l00596"></a>00596    }
<a name="l00597"></a>00597   }
<a name="l00598"></a>00598  }
<a name="l00599"></a>00599 }
</pre></div></div>
<hr class="footer"/><address style="text-align: right;"><small>Generated on Sat Nov 13 17:14:18 2010 by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.6.3 </small></address>
</body>
</html>
